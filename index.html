<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>MSR Tool</title>
    <link rel="stylesheet" type="text/css" href="normalize.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
      body{font-family:Montserrat,sans-serif}
      button{background-color:#fff;border-radius:5px;padding:10px}
      form{display:flex;flex-direction:column;justify-content:center;align-items:center;align-content:center}
      h1{display:flex;justify-content:center;font-family:Roboto,sans-serif}
      header{display:flex;justify-content:center;align-content:center;align-items:center}
      main{display:flex;justify-content:center}
    </style>
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue-pink.min.css">
    <style>.md-18{color:gray;font-size:18px}.md-48{color:#2196f3;font-size:48px;padding-right:10px}</style>
    <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&display=swap" rel="stylesheet">  <body>
    <header role="banner">
        <i class="material-icons md-48">
          library_books
        </i>
      <h1>MSR Tool</h1>
    </header>
    <main role="main">
      <form onsubmit="handleSubmitAmounts(event)">
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <input id="allowed" class="mdl-textfield__input" type="text">
          <label class="mdl-textfield__label" for="allowed">Allowed amount:</label>
          <div class="mdl-tooltip mdl-tooltip--large" data-mdl-for="allowed">
            From pricing source (e.g. PPPWeb)
          </div>
        </div>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <input id="billed" class="mdl-textfield__input" type="text">
          <label class="mdl-textfield__label" for="billed">Unlisted billed amount:</label>
          <div class="mdl-tooltip mdl-tooltip--large" data-mdl-for="billed">
            Billed amount of code under review
          </div>
        </div>
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <input id="listed" class="mdl-textfield__input" type="text">
          <label class="mdl-textfield__label" for="listed">Highest listed amount:</label>
          <div class="mdl-tooltip mdl-tooltip--large" data-mdl-for="listed">
            Billed amount of highest listed code on claim
          </div>
        </div>
        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" type="submit">
          Determine amount to allow
        </button>
        <h6>
          Allow <span id="name"></span>: <span id="allow"></span>
        </h6>
      </form>
    </main>
    <script type="text/javascript">
      function handleSubmitAmounts(t){t.preventDefault();
        const l=new Amount(["allowed","billed","listed"]);
        displayHtml("allow",`$${l.allow}`),
        displayHtml("name",l.name)};
      class Amount{
        constructor(t){this.data=this.setData(t);const{allowed:l,billed:a,listed:s}=this.data;this.allow=this.setAllowAmount(l,a,s),this.name=this.setName(this.data,this.allow)}
        setData(t){const l=t.map(t=>parseInt($(`#${t}`).val())),a={};return l.forEach((l,s)=>{a[t[s]]=l}),a}
        setAllowAmount(t,l,a){return t>a&&l>a?t>l?l:t:t>l?t:l}
        setName(t,l){return Object.keys(t).reduce((a,s)=>(t[s]===l&&(a=s),a),0)}}
      function displayHtml(t,l){$(`#${t}`).html(l)};</script>
    <script
      src="https://code.jquery.com/jquery-3.3.1.min.js"
      integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
      crossorigin="anonymous"></script>
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  </body>
</html>